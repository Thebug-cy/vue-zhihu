{"remainingRequest":"/Users/w/Documents/三阶段/2020-9-16/obj/node_modules/thread-loader/dist/cjs.js!/Users/w/Documents/三阶段/2020-9-16/obj/node_modules/babel-loader/lib/index.js!/Users/w/Documents/三阶段/2020-9-16/obj/src/plugins/axios.js","dependencies":[{"path":"/Users/w/Documents/三阶段/2020-9-16/obj/src/plugins/axios.js","mtime":1600767695499},{"path":"/Users/w/Documents/三阶段/2020-9-16/obj/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/w/Documents/三阶段/2020-9-16/obj/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/w/Documents/三阶段/2020-9-16/obj/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IHJvdXRlciBmcm9tICcuL3JvdXRlci5qcyc7CmltcG9ydCB2bSBmcm9tICcuLi9tYWluLmpzJzsgLy/mt7vliqDkuIDkuKror7fmsYLnmoTmi6bmiKrlmagKCmF4aW9zLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgLy9jb25maWcg5ZCr5pyJ5Y+R5Ye655qE6K+35rGC55qE6YWN572u5L+h5oGvICBheGlvcyhjb25maWcpCiAgLy8g5q+P5qyh6YO96Ieq5Yqo5pC65bimdG9rZW4KICB2YXIgdG9rZW4gPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKTsKICB0b2tlbiA9IHRva2VuID8gSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKSkudG9rZW4gOiAnJzsKICBjb25maWcuaGVhZGVycyA9IHsKICAgIHRva2VuOiB0b2tlbgogIH07IC8v5pi+56S6bG9hZGluZwoKICB2bS5iTG9hZGluZyA9IHRydWU7CiAgcmV0dXJuIGNvbmZpZzsgLy8g5pKS5omL5pS+5Ye657uP6L+H6YWN572u55qE6K+35rGCCn0sIGZ1bmN0aW9uIChlcnJvcikgewogIC8vIOWPkeWHuuS6humUmeivr+eahOivt+axgu+8jOaLpuaIqgogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOyAvLyDmt7vliqDkuIDkuKrlk43lupTnmoTmi6bmiKrlmagKCmF4aW9zLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgLy9yZXNwb25zZSAgfn4gYXhpb3Por7fmsYLlkI7nmoRyZXMKICAvLyDlk43lupTmlbDmja7lm57mnaXlkI7vvIzliLDovr7nm67moIfnu4Tku7bkuYvliY3vvIzlgZrngrnkuosgICByZXMuc3RhdHVzICAgcmVzLmRhdGEuZXJyID09IDIKICAvL+agoemqjOi/lOWbnuaVsOaNru+8jHRva2Vu6L+H5pyf77yM6Lev55Sx6Lez6L2sbG9naW4s5Lyg6YCS5b2T5YmN6Lev55Sx5Zyw5Z2ACiAgdmFyIGN1cnJlbnRSb3V0ZSA9IHJvdXRlci5jdXJyZW50Um91dGUuZnVsbFBhdGg7IC8v6I635Y+W5b2T5YmN6Lev55Sx5YWo6Lev5b6E77yMc3RyaW5nCgogIGlmIChyZXNwb25zZS5kYXRhLmVyciA9PT0gMiAmJiAhY3VycmVudFJvdXRlLmluY2x1ZGVzKCcvbG9naW4nKSkgewogICAgcm91dGVyLnJlcGxhY2UoewogICAgICBwYXRoOiAnL2xvZ2luJywKICAgICAgcXVlcnk6IHsKICAgICAgICBwOiBjdXJyZW50Um91dGUKICAgICAgfQogICAgfSk7CiAgfQoKICB2bS5iTG9hZGluZyA9IGZhbHNlOwogIHJldHVybiByZXNwb25zZTsgLy/lpZTlkJHnu4Tku7YKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgLy8g6ZSZ6K+v55qE5ZON5bqU77yM5oum5oiqCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7ClZ1ZS5wcm90b3R5cGUuJGF4aW9zID0gYXhpb3M7IC8vIHdpbmRvdy5heGlvcz1heGlvczsgIMOXCgpleHBvcnQgZGVmYXVsdCBheGlvczs="},{"version":3,"sources":["/Users/w/Documents/三阶段/2020-9-16/obj/src/plugins/axios.js"],"names":["axios","Vue","router","vm","interceptors","request","use","config","token","window","localStorage","getItem","JSON","parse","headers","bLoading","error","Promise","reject","response","currentRoute","fullPath","data","err","includes","replace","path","query","p","prototype","$axios"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,KAAhB;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,EAAP,MAAe,YAAf,C,CAEA;;AACAH,KAAK,CAACI,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,UAASC,MAAT,EAAiB;AAC9C;AAEA;AACA,MAAIC,KAAK,GAAGC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,CAAZ;AACAH,EAAAA,KAAK,GAAGA,KAAK,GAAGI,IAAI,CAACC,KAAL,CAAWJ,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,CAAX,EAAgDH,KAAnD,GAA2D,EAAxE;AACAD,EAAAA,MAAM,CAACO,OAAP,GAAe;AACbN,IAAAA,KAAK,EAAEA;AADM,GAAf,CAN8C,CAU9C;;AACAL,EAAAA,EAAE,CAACY,QAAH,GAAc,IAAd;AAEA,SAAOR,MAAP,CAb8C,CAahC;AACf,CAdD,EAcG,UAASS,KAAT,EAAgB;AACjB;AACA,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAjBD,E,CAmBA;;AACAhB,KAAK,CAACI,YAAN,CAAmBe,QAAnB,CAA4Bb,GAA5B,CAAgC,UAASa,QAAT,EAAmB;AACjD;AACA;AACA;AACA,MAAIC,YAAY,GAAGlB,MAAM,CAACkB,YAAP,CAAoBC,QAAvC,CAJiD,CAID;;AAChD,MAAGF,QAAQ,CAACG,IAAT,CAAcC,GAAd,KAAoB,CAApB,IAAyB,CAACH,YAAY,CAACI,QAAb,CAAsB,QAAtB,CAA7B,EAA6D;AAE3DtB,IAAAA,MAAM,CAACuB,OAAP,CAAe;AACbC,MAAAA,IAAI,EAAC,QADQ;AAEbC,MAAAA,KAAK,EAAC;AAACC,QAAAA,CAAC,EAACR;AAAH;AAFO,KAAf;AAID;;AAEDjB,EAAAA,EAAE,CAACY,QAAH,GAAc,KAAd;AAEA,SAAOI,QAAP,CAfiD,CAejC;AACjB,CAhBD,EAgBG,UAASH,KAAT,EAAgB;AACjB;AACA,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAnBD;AAsBAf,GAAG,CAAC4B,SAAJ,CAAcC,MAAd,GAAqB9B,KAArB,C,CACA;;AACA,eAAeA,KAAf","sourcesContent":["import axios from 'axios';\nimport Vue from 'vue';\nimport router from './router.js'\nimport vm from '../main.js'\n\n//添加一个请求的拦截器\naxios.interceptors.request.use(function(config) {\n  //config 含有发出的请求的配置信息  axios(config)\n  \n  // 每次都自动携带token\n  let token = window.localStorage.getItem('user')\n  token = token ? JSON.parse(window.localStorage.getItem('user')).token : ''\n  config.headers={\n    token: token\n  }\n  \n  //显示loading\n  vm.bLoading = true;\n  \n  return config;// 撒手放出经过配置的请求\n}, function(error) {\n  // 发出了错误的请求，拦截\n  return Promise.reject(error);\n});\n\n// 添加一个响应的拦截器\naxios.interceptors.response.use(function(response) {\n  //response  ~~ axios请求后的res\n  // 响应数据回来后，到达目标组件之前，做点事   res.status   res.data.err == 2\n  //校验返回数据，token过期，路由跳转login,传递当前路由地址\n  let currentRoute = router.currentRoute.fullPath;//获取当前路由全路径，string\n  if(response.data.err===2 && !currentRoute.includes('/login')){\n    \n    router.replace({\n      path:'/login',\n      query:{p:currentRoute}\n    })\n  }\n  \n  vm.bLoading = false;\n  \n  return response;//奔向组件\n}, function(error) {\n  // 错误的响应，拦截\n  return Promise.reject(error);\n});\n\n\nVue.prototype.$axios=axios;\n// window.axios=axios;  ×\nexport default axios;"]}]}