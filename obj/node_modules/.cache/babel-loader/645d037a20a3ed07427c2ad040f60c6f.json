{"remainingRequest":"/Users/w/Documents/三阶段/2020-9-22/2状态管理项目/node_modules/thread-loader/dist/cjs.js!/Users/w/Documents/三阶段/2020-9-22/2状态管理项目/node_modules/babel-loader/lib/index.js!/Users/w/Documents/三阶段/2020-9-22/2状态管理项目/src/plugins/axios.js","dependencies":[{"path":"/Users/w/Documents/三阶段/2020-9-22/2状态管理项目/src/plugins/axios.js","mtime":1600969278079},{"path":"/Users/w/Documents/三阶段/2020-9-22/2状态管理项目/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/w/Documents/三阶段/2020-9-22/2状态管理项目/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/w/Documents/三阶段/2020-9-22/2状态管理项目/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IHJvdXRlciBmcm9tICcuL3JvdXRlci5qcyc7CmltcG9ydCBzdG9yZSBmcm9tICcuL3Z1ZXguanMnOwppbXBvcnQgKiBhcyB0eXBlcyBmcm9tICcuLi9zdG9yZS90eXBlcy5qcyc7IC8v5re75Yqg5LiA5Liq6K+35rGC55qE5oum5oiq5ZmoCgpheGlvcy5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIC8vY29uZmlnIOWQq+acieWPkeWHuueahOivt+axgueahOmFjee9ruS/oeaBryAgYXhpb3MoY29uZmlnKQogIC8vIOavj+asoemDveiHquWKqOaQuuW4pnRva2VuCiAgdmFyIHRva2VuID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyJyk7CiAgdG9rZW4gPSB0b2tlbiA/IHN0b3JlLnN0YXRlLnVzZXIudG9rZW4gOiAnJzsKICBjb25maWcuaGVhZGVycyA9IHsKICAgIHRva2VuOiB0b2tlbgogIH07IC8v5pi+56S6bG9hZGluZwoKICBzdG9yZS5jb21taXQodHlwZXMuVVBEQVRFX0xPQURJTkcsIHRydWUpOwogIHJldHVybiBjb25maWc7IC8vIOaSkuaJi+aUvuWHuue7j+i/h+mFjee9rueahOivt+axggp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAvLyDlj5Hlh7rkuobplJnor6/nmoTor7fmsYLvvIzmi6bmiKoKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsgLy8g5re75Yqg5LiA5Liq5ZON5bqU55qE5oum5oiq5ZmoCgpheGlvcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIC8vcmVzcG9uc2UgIH5+IGF4aW9z6K+35rGC5ZCO55qEcmVzCiAgLy8g5ZON5bqU5pWw5o2u5Zue5p2l5ZCO77yM5Yiw6L6+55uu5qCH57uE5Lu25LmL5YmN77yM5YGa54K55LqLICAgcmVzLnN0YXR1cyAgIHJlcy5kYXRhLmVyciA9PSAyCiAgLy/moKHpqozov5Tlm57mlbDmja7vvIx0b2tlbui/h+acn++8jOi3r+eUsei3s+i9rGxvZ2luLOS8oOmAkuW9k+WJjei3r+eUseWcsOWdgAogIHZhciBjdXJyZW50Um91dGUgPSByb3V0ZXIuY3VycmVudFJvdXRlLmZ1bGxQYXRoOyAvL+iOt+WPluW9k+WJjei3r+eUseWFqOi3r+W+hO+8jHN0cmluZwoKICBpZiAocmVzcG9uc2UuZGF0YS5lcnIgPT09IDIgJiYgIWN1cnJlbnRSb3V0ZS5pbmNsdWRlcygnL2xvZ2luJykpIHsKICAgIHJvdXRlci5yZXBsYWNlKHsKICAgICAgcGF0aDogJy9sb2dpbicsCiAgICAgIHF1ZXJ5OiB7CiAgICAgICAgcDogY3VycmVudFJvdXRlCiAgICAgIH0KICAgIH0pOwogIH0KCiAgc3RvcmUuY29tbWl0KHR5cGVzLlVQREFURV9MT0FESU5HLCBmYWxzZSk7CiAgcmV0dXJuIHJlc3BvbnNlOyAvL+WllOWQkee7hOS7tgp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAvLyDplJnor6/nmoTlk43lupTvvIzmi6bmiKoKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKVnVlLnByb3RvdHlwZS4kYXhpb3MgPSBheGlvczsgLy8gd2luZG93LmF4aW9zPWF4aW9zOyAgw5cKCmV4cG9ydCBkZWZhdWx0IGF4aW9zOw=="},{"version":3,"sources":["/Users/w/Documents/三阶段/2020-9-22/2状态管理项目/src/plugins/axios.js"],"names":["axios","Vue","router","store","types","interceptors","request","use","config","token","window","localStorage","getItem","state","user","headers","commit","UPDATE_LOADING","error","Promise","reject","response","currentRoute","fullPath","data","err","includes","replace","path","query","p","prototype","$axios"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,KAAhB;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,KAAP,MAAkB,WAAlB;AACA,OAAO,KAAKC,KAAZ,MAAuB,mBAAvB,C,CAEA;;AACAJ,KAAK,CAACK,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,UAASC,MAAT,EAAiB;AAC5C;AAEA;AACA,MAAIC,KAAK,GAAGC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,CAAZ;AACAH,EAAAA,KAAK,GAAGA,KAAK,GAAGN,KAAK,CAACU,KAAN,CAAYC,IAAZ,CAAiBL,KAApB,GAA4B,EAAzC;AACAD,EAAAA,MAAM,CAACO,OAAP,GAAiB;AACbN,IAAAA,KAAK,EAAEA;AADM,GAAjB,CAN4C,CAU5C;;AACAN,EAAAA,KAAK,CAACa,MAAN,CAAaZ,KAAK,CAACa,cAAnB,EAAmC,IAAnC;AAEA,SAAOT,MAAP,CAb4C,CAa7B;AAClB,CAdD,EAcG,UAASU,KAAT,EAAgB;AACf;AACA,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CAjBD,E,CAmBA;;AACAlB,KAAK,CAACK,YAAN,CAAmBgB,QAAnB,CAA4Bd,GAA5B,CAAgC,UAASc,QAAT,EAAmB;AAC/C;AACA;AACA;AACA,MAAIC,YAAY,GAAGpB,MAAM,CAACoB,YAAP,CAAoBC,QAAvC,CAJ+C,CAIE;;AACjD,MAAIF,QAAQ,CAACG,IAAT,CAAcC,GAAd,KAAsB,CAAtB,IAA2B,CAACH,YAAY,CAACI,QAAb,CAAsB,QAAtB,CAAhC,EAAiE;AAE7DxB,IAAAA,MAAM,CAACyB,OAAP,CAAe;AACXC,MAAAA,IAAI,EAAE,QADK;AAEXC,MAAAA,KAAK,EAAE;AAAEC,QAAAA,CAAC,EAAER;AAAL;AAFI,KAAf;AAIH;;AAEDnB,EAAAA,KAAK,CAACa,MAAN,CAAaZ,KAAK,CAACa,cAAnB,EAAmC,KAAnC;AAEA,SAAOI,QAAP,CAf+C,CAe9B;AACpB,CAhBD,EAgBG,UAASH,KAAT,EAAgB;AACf;AACA,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CAnBD;AAsBAjB,GAAG,CAAC8B,SAAJ,CAAcC,MAAd,GAAuBhC,KAAvB,C,CACA;;AACA,eAAeA,KAAf","sourcesContent":["import axios from 'axios';\nimport Vue from 'vue';\nimport router from './router.js'\nimport store from './vuex.js'\nimport * as types from '../store/types.js'\n\n//添加一个请求的拦截器\naxios.interceptors.request.use(function(config) {\n    //config 含有发出的请求的配置信息  axios(config)\n\n    // 每次都自动携带token\n    let token = window.localStorage.getItem('user')\n    token = token ? store.state.user.token : ''\n    config.headers = {\n        token: token\n    }\n\n    //显示loading\n    store.commit(types.UPDATE_LOADING, true)\n\n    return config; // 撒手放出经过配置的请求\n}, function(error) {\n    // 发出了错误的请求，拦截\n    return Promise.reject(error);\n});\n\n// 添加一个响应的拦截器\naxios.interceptors.response.use(function(response) {\n    //response  ~~ axios请求后的res\n    // 响应数据回来后，到达目标组件之前，做点事   res.status   res.data.err == 2\n    //校验返回数据，token过期，路由跳转login,传递当前路由地址\n    let currentRoute = router.currentRoute.fullPath; //获取当前路由全路径，string\n    if (response.data.err === 2 && !currentRoute.includes('/login')) {\n\n        router.replace({\n            path: '/login',\n            query: { p: currentRoute }\n        })\n    }\n\n    store.commit(types.UPDATE_LOADING, false)\n\n    return response; //奔向组件\n}, function(error) {\n    // 错误的响应，拦截\n    return Promise.reject(error);\n});\n\n\nVue.prototype.$axios = axios;\n// window.axios=axios;  ×\nexport default axios;"]}]}